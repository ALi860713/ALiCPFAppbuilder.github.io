<html>
<head>
<title>ClawMachine</title>
<link rel="stylesheet" type="text/css" href="./style.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

</head>
<body>

<div id="container">

	<div id="panel">
		<img id="joystick" src="./images/joystick/stick.png" />
		<img id="base" src="./images/joystick/base.png" style="width:50%; display:none;" />
	</div>

	<div id="result" style="display:block;"></div>
	
	<img id="grabgif" src="./images/grab.gif" />
	<img id="grab" src="./images/btn.png" />
	
	<img id="set" src="./images/set.png" />

</div>

<script src="./virtualjoystick.js" ></script>
<script>

var joystick = document.getElementById("joystick");
var grab = document.getElementById("grab");
var base = document.getElementById("base");

var joystick = new VirtualJoystick({
	container: document.getElementById("panel"),
	mouseSupport	: true,
	stationaryBase	: true,
	limitStickTravel: true,
	baseElement: base,
	stickElement: joystick,
	stickRadius	: 80,
	baseX		: 300,
	baseY		: 300
});

joystick.addEventListener('touchStart', function(){
	console.log('down')
})
joystick.addEventListener('touchEnd', function(){
	console.log('up')
})

setInterval(function(){
	var outputEl	= document.getElementById('result');
	outputEl.innerHTML	= '<b>Result:</b> '
		+ ' dx:'+joystick.deltaX()
		+ ' dy:'+joystick.deltaY()
		+ (joystick.right()	? ' right'	: '')
		+ (joystick.up()	? ' up'		: '')
		+ (joystick.left()	? ' left'	: '')
		+ (joystick.down()	? ' down' 	: '')	
}, 1/30 * 1000);

grab.addEventListener("touchstart", function(event) {
	grab.src="./images/btn_grab.png";
});

grab.addEventListener("touchend", function(event) {
	grab.src="./images/btn.png";
});

</script>

</body>
</html>